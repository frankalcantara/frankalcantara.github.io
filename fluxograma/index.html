<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxograma Interativo - Aprendizado de Algoritmos</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Fluxograma Interativo</h1>
            <p>Ferramenta para aprendizado de racioc√≠nio algor√≠tmico</p>
        </header>
        
        <div class="main-content">
            <!-- Container para os pain√©is superiores (Editor e Diagrama) -->
            <div class="content-top">
            <div class="editor-panel">
                <div class="panel-header">
                    <h2>Editor de Fluxograma</h2>
                </div>
                
                <div class="example-selector">
                    <h3>Exemplos Predefinidos</h3>
                    <select id="example-selector">
                        <option value="">Selecione um exemplo para carregar automaticamente...</option>
                        <option value="basico">1. B√°sico - Sequ√™ncia Simples</option>
                        <option value="decisao">2. Intermedi√°rio - Com Decis√£o</option>
                        <option value="calculadora">3. Avan√ßado - Calculadora</option>
                    </select>
                </div>
                
                <div class="editor-container">
                    <textarea id="mermaid-editor" placeholder="Digite seu fluxograma aqui usando sintaxe Mermaid...

Exemplo:
flowchart TD
    A[In√≠cio] --> B[Ler idade]
    B --> C{idade >= 18}
    C -->|Sim| D[Pode votar]
    C -->|N√£o| E[N√£o pode votar]
    D --> F[Fim]
    E --> F"></textarea>
                </div>
                
                <div class="controls">
                    <h3>Controles de Execu√ß√£o</h3>
                    <div class="button-group">
                        <button id="execute-all" class="btn btn-icon btn-primary" title="Executar Tudo">
                            ‚ñ∂Ô∏è
                        </button>
                        <button id="execute-step" class="btn btn-icon btn-secondary" title="Executar Passo a Passo">
                            üë£
                        </button>
                        <button id="reset" class="btn btn-icon btn-tertiary" title="Reiniciar">
                            üîÑ
                        </button>
                        <button id="prev-step" class="btn btn-icon" title="Passo Anterior">
                            ‚¨ÖÔ∏è
                        </button>
                        <button id="next-step" class="btn btn-icon" title="Pr√≥ximo Passo">
                            ‚û°Ô∏è
                        </button>
                    </div>
                    
                    <div class="step-controls" id="step-controls" style="display: none;">
                        <span id="step-counter" class="step-info">Passo: 0/0</span>
                    </div>
                </div>
                
                <div class="input-variables" id="input-variables">
                    <!-- Campos de entrada de vari√°veis ser√£o inseridos aqui -->
                </div>
            </div>
            
            <div class="diagram-panel">
                <div class="panel-header">
                    <h2>Visualiza√ß√£o do Fluxograma</h2>
                    <div class="diagram-controls">
                        <button id="zoom-in" class="btn btn-icon" title="Aumentar zoom">üîç+</button>
                        <button id="zoom-out" class="btn btn-icon" title="Diminuir zoom">üîç-</button>
                        <button id="fit-diagram" class="btn btn-icon" title="Ajustar √† tela">üìê</button>
                    </div>
                </div>
                
                <div class="diagram-container">
                    <div id="mermaid-diagram"></div>
                    <div id="error-display" class="error-message" style="display: none;"></div>
                </div>
                
                <div class="execution-status">
                    <div id="current-step-info" class="step-info"></div>
                </div>
            </div>
            </div>

            <!-- Painel inferior para o console de sa√≠da -->
            <div class="output-console">
                <div class="console-header">
                    <h3 id="console-title">Sintaxe para Cria√ß√£o de Fluxogramas</h3>
                    <button id="flip-console" class="btn btn-icon btn-flip" title="Voltar para o console de sa√≠da">
                        üíº
                    </button>
                </div>
                <div id="console-output" style="display: none !important; background: #1f2937; color: #f9fafb; padding: 20px; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.4; height: 200px; overflow-y: auto; white-space: pre-wrap; margin: 0;"></div>
                <div id="syntax-help" style="display: block !important; background: white; color: #1f2937; padding: 20px; height: 200px; overflow-y: auto; font-size: 14px; line-height: 1.5;">
                    <div class="syntax-section">
                        <h4>üî§ Estrutura B√°sica</h4>
                        <code>flowchart TD<br>
    A[In√≠cio] --> B[Processo]<br>
    B --> C[Fim]</code>
                    </div>
                    
                    <div class="syntax-section">
                        <h4>üìù Tipos de Blocos</h4>
                        <ul>
                            <li><code>A[Texto]</code> - Processo/Atribui√ß√£o</li>
                            <li><code>A{Condi√ß√£o}</code> - Decis√£o</li>
                            <li><code>A[Ler vari√°vel]</code> - Entrada</li>
                            <li><code>A[Mostrar resultado]</code> - Sa√≠da</li>
                        </ul>
                    </div>
                    
                    <div class="syntax-section">
                        <h4>üîó Conex√µes</h4>
                        <ul>
                            <li><code>A --> B</code> - Conex√£o simples</li>
                            <li><code>A -->|Sim| B</code> - Conex√£o com r√≥tulo</li>
                            <li><code>A -->|N√£o| C</code> - Caminho alternativo</li>
                        </ul>
                    </div>
                    
                    <div class="syntax-section">
                        <h4>‚ö° Operadores Suportados</h4>
                        <ul>
                            <li><code>==</code> - Igualdade</li>
                            <li><code>>=, <=, >, <</code> - Compara√ß√£o</li>
                            <li><code>+, -, *, /</code> - Matem√°tica</li>
                        </ul>
                    </div>
                    
                    <div class="syntax-section">
                        <h4>üí° Palavras-chave</h4>
                        <ul>
                            <li><strong>Entrada:</strong> "Ler", "Digite", "Entrada"</li>
                            <li><strong>Sa√≠da:</strong> "Mostrar", "Escrever", "Print"</li>
                            <li><strong>In√≠cio:</strong> "In√≠cio", "Start"</li>
                            <li><strong>Fim:</strong> "Fim", "End"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script>
        // Script inline para for√ßar estado inicial IMEDIATAMENTE
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üõ†Ô∏è For√ßando estado inicial INLINE...');
            
            function forceInitialState() {
                const title = document.getElementById('console-title');
                const flipBtn = document.getElementById('flip-console');
                const consoleDiv = document.getElementById('console-output');
                const syntaxDiv = document.getElementById('syntax-help');
                
                if (title && flipBtn && consoleDiv && syntaxDiv) {
                    // FOR√áAR sintaxe vis√≠vel
                    title.textContent = 'Sintaxe para Cria√ß√£o de Fluxogramas';
                    flipBtn.textContent = 'üíº';
                    flipBtn.title = 'Voltar para o console de sa√≠da';
                    
                    // FOR√áAR displays com m√°xima prioridade
                    consoleDiv.style.setProperty('display', 'none', 'important');
                    syntaxDiv.style.setProperty('display', 'block', 'important');
                    
                    console.log('‚úÖ Estado inicial for√ßado: SINTAXE VIS√çVEL');
                    console.log('Console display:', window.getComputedStyle(consoleDiv).display);
                    console.log('Sintaxe display:', window.getComputedStyle(syntaxDiv).display);
                    
                    return true;
                } else {
                    console.error('‚ùå Elementos n√£o encontrados no script inline');
                    return false;
                }
            }
            
            // Tentar imediatamente
            if (!forceInitialState()) {
                // Se falhou, tentar novamente ap√≥s 100ms
                setTimeout(forceInitialState, 100);
            }
            
            // Verificar novamente ap√≥s 500ms para garantir
            setTimeout(function() {
                const syntaxDiv = document.getElementById('syntax-help');
                const consoleDiv = document.getElementById('console-output');
                if (syntaxDiv && consoleDiv) {
                    const syntaxVisible = window.getComputedStyle(syntaxDiv).display !== 'none';
                    const consoleHidden = window.getComputedStyle(consoleDiv).display === 'none';
                    
                    console.log('üîç Verifica√ß√£o final:');
                    console.log('Sintaxe vis√≠vel:', syntaxVisible);
                    console.log('Console oculto:', consoleHidden);
                    
                    if (!syntaxVisible || !consoleHidden) {
                        console.warn('‚ö†Ô∏è Estado n√£o aplicado corretamente, for√ßando novamente...');
                        forceInitialState();
                    }
                }
            }, 500);
        });
    </script>
    <script src="unified-parser.js"></script>
    <script src="step-by-step-executor.js"></script>
    <script src="script.js"></script>
</body>
</html>
