<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="800"
   height="600"
   version="1.1"
   id="svg56"
   sodipodi:docname="io_architecture_interrupts_figure.svg"
   inkscape:version="1.4 (86a8ad7, 2024-10-11)"
   inkscape:export-filename="..\images\io_architecture_interrupts_figure.webp"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview56"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="1.425"
     inkscape:cx="317.19298"
     inkscape:cy="257.19298"
     inkscape:window-width="1920"
     inkscape:window-height="1057"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg56" />
  <!-- Background -->
  <!-- Title -->
  <text
     x="385.9649"
     y="30"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="18px"
     font-weight="bold"
     fill="#2c3e50"
     id="text1">Arquitetura de E/S em Camadas e Sistema de Interrupções</text>
  <!-- Layered Architecture Section -->
  <text
     x="199.29825"
     y="59.473682"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="16px"
     font-weight="bold"
     fill="#34495e"
     id="text2">Arquitetura em Camadas</text>
  <!-- Application Layer -->
  <rect
     x="100"
     y="73"
     width="200"
     height="40"
     fill="#3498db"
     rx="5"
     id="rect2" />
  <text
     x="200"
     y="88"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#ffffff"
     font-weight="bold"
     id="text3">APLICAÇÃO</text>
  <text
     x="200"
     y="103"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#ffffff"
     id="text4">printf(&quot;Olá Mundo&quot;);</text>
  <!-- OS Layer -->
  <rect
     x="100"
     y="131"
     width="200"
     height="40"
     fill="#e74c3c"
     rx="5"
     id="rect4" />
  <text
     x="200"
     y="146"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#ffffff"
     font-weight="bold"
     id="text5">SISTEMA OPERACIONAL</text>
  <text
     x="200"
     y="161"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#ffffff"
     id="text6">write(stdout, buffer, size)</text>
  <!-- Driver Layer -->
  <rect
     x="100"
     y="187"
     width="200"
     height="40"
     fill="#2ecc71"
     rx="5"
     id="rect6" />
  <text
     x="200"
     y="202"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#ffffff"
     font-weight="bold"
     id="text7">DRIVER DE DISPOSITIVO</text>
  <text
     x="200"
     y="217"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#ffffff"
     id="text8">Traduz para comandos específicos</text>
  <!-- Hardware Layer -->
  <rect
     x="98.947365"
     y="244.75438"
     width="200"
     height="40"
     fill="#f39c12"
     rx="5"
     id="rect8" />
  <text
     x="198.94737"
     y="259.75439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#ffffff"
     font-weight="bold"
     id="text9">HARDWARE</text>
  <text
     x="198.94737"
     y="274.75439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#ffffff"
     id="text10">Impressora, Disco, Rede, etc.</text>
  <!-- Translation arrows -->
  <path
     d="m 198.5965,113 v 9.82554"
     stroke="#34495e"
     stroke-width="2.97372"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path10"
     style="stroke-width:2.074;stroke-dasharray:none;marker-end:url(#Triangle)" />
  <path
     d="m 198.5965,170.12771 v 9.82553"
     stroke="#34495e"
     stroke-width="2.97372"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path11"
     style="stroke-width:2.074;stroke-dasharray:none;marker-end:url(#Triangle)" />
  <path
     d="m 198.5965,227.25541 v 9.82555"
     stroke="#34495e"
     stroke-width="2.97372"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path12"
     style="stroke-width:2.074;stroke-dasharray:none;marker-end:url(#Triangle)" />
  <!-- Translation complexity example -->
  <rect
     x="50"
     y="298"
     width="300"
     height="60"
     fill="#ecf0f1"
     stroke="#bdc3c7"
     stroke-width="1"
     rx="5"
     id="rect12" />
  <text
     x="200"
     y="318"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#2c3e50"
     font-weight="bold"
     id="text12">Exemplo de Tradução</text>
  <text
     x="70"
     y="338"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     id="text13">Simples: &quot;Imprimir arquivo.pdf&quot;</text>
  <text
     x="70"
     y="353"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     id="text14">Complexo: 200+ comandos de controle da impressora</text>
  <!-- Interrupt System Section -->
  <text
     x="511.57895"
     y="58.070175"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="16px"
     font-weight="bold"
     fill="#34495e"
     id="text15">Sistema de Interrupções vs Polling</text>
  <!-- Polling Timeline -->
  <text
     x="504.91226"
     y="78.245613"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="14px"
     font-weight="bold"
     fill="#7f8c8d"
     id="text16">Polling (Ineficiente)</text>
  <rect
     x="424.96262"
     y="88.295952"
     width="176.74141"
     height="79.899292"
     fill="#ffffff"
     stroke="#e74c3c"
     stroke-width="2.10071"
     rx="5.523169"
     id="rect16" />
  <!-- CPU checking constantly -->
  <rect
     x="439.22806"
     y="106.80702"
     width="33.333332"
     height="20.964912"
     fill="#3498db"
     id="rect17"
     style="stroke-width:1.52625" />
  <text
     x="456.24557"
     y="120.61404"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     font-weight="bold"
     id="text17">CPU</text>
  <!-- Polling arrows -->
  <path
     d="m 478.77192,107.70176 q 30,-12.000005 60,0"
     stroke="#e74c3c"
     stroke-width="2"
     fill="none"
     stroke-dasharray="2, 2"
     id="path17"
     style="stroke:#5f8dd3" />
  <text
     x="508.77194"
     y="99.701752"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#e74c3c"
     id="text18">Check?</text>
  <path
     d="m 478.77192,117.70176 q 30,-10 60,0"
     stroke="#e74c3c"
     stroke-width="2"
     fill="none"
     stroke-dasharray="2, 2"
     id="path18"
     style="stroke:#5f8dd3" />
  <text
     x="508.77194"
     y="109.70175"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#e74c3c"
     id="text19">Check?</text>
  <path
     d="m 478.77192,127.70176 q 30,-10 60,0"
     stroke="#e74c3c"
     stroke-width="2"
     fill="none"
     stroke-dasharray="2, 2"
     id="path19"
     style="stroke:#5f8dd3" />
  <text
     x="508.77194"
     y="119.70177"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#e74c3c"
     id="text20">Check?</text>
  <!-- Device -->
  <rect
     x="543.85956"
     y="104.91226"
     width="40"
     height="25"
     fill="#f39c12"
     id="rect20" />
  <text
     x="563.85956"
     y="119.91229"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text21">Disco</text>
  <text
     x="454.38596"
     y="147.36842"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#e74c3c"
     font-weight="bold"
     id="text22"><tspan
       sodipodi:role="line"
       id="tspan56"
       x="454.38596"
       y="147.36842">CPU desperdiça tempo</tspan><tspan
       sodipodi:role="line"
       id="tspan57"
       x="454.38596"
       y="158.61842">verificando constantemente</tspan></text>
  <!-- Interrupt Timeline -->
  <text
     x="504.91226"
     y="198.24562"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="14px"
     font-weight="bold"
     fill="#7f8c8d"
     id="text23">Interrupções (Eficiente)</text>
  <rect
     x="424.95139"
     y="208.28476"
     width="172.90419"
     height="99.92173"
     fill="#ffffff"
     stroke="#2ecc71"
     stroke-width="2.07827"
     rx="5.4032559"
     id="rect23" />
  <!-- CPU doing other work -->
  <rect
     x="434.91226"
     y="218.24562"
     width="25.614035"
     height="19.912281"
     fill="#3498db"
     id="rect24"
     style="stroke-width:1.30388" />
  <text
     x="447.36844"
     y="232.40352"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     font-weight="bold"
     id="text24">CPU</text>
  <text
     x="481.05264"
     y="226.75439"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#2ecc71"
     id="text25">Executando</text>
  <text
     x="479.99997"
     y="233.94737"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#2ecc71"
     id="text26">outras tarefas</text>
  <!-- Device working -->
  <rect
     x="543.47363"
     y="216.73685"
     width="40"
     height="25"
     fill="#f39c12"
     id="rect26" />
  <text
     x="563.47363"
     y="231.73685"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text27">Disco</text>
  <text
     x="566.66663"
     y="251.14037"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#f39c12"
     id="text28">Trabalhando...</text>
  <!-- Interrupt signal -->
  <path
     d="m 543.5968,232.78462 q -33.35883,27.60556 -77.83728,0"
     stroke="#e67e22"
     stroke-width="4"
     fill="none"
     marker-end="url(#orangeArrow)"
     id="path28"
     style="stroke-width:1.46586;stroke-dasharray:none;marker-end:url(#marker57)" />
  <text
     x="507.60321"
     y="254.19263"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8.62774px"
     fill="#e67e22"
     font-weight="bold"
     id="text29"
     transform="scale(0.99103206,1.0090491)"
     style="stroke-width:0.862774">INTERRUPÇÃO!</text>
  <!-- CPU handles interrupt -->
  <rect
     x="434.91226"
     y="259.98248"
     width="26.666666"
     height="20.263159"
     fill="#9b59b6"
     id="rect29"
     style="stroke-width:1.34208" />
  <text
     x="447.36844"
     y="273.36844"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     font-weight="bold"
     id="text30">CPU</text>
  <text
     x="464.56137"
     y="268.49124"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#9b59b6"
     id="text31">Processa</text>
  <text
     x="464.56137"
     y="278.49124"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#9b59b6"
     id="text32">interrupção</text>
  <text
     x="457.19296"
     y="291.66669"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#2ecc71"
     font-weight="bold"
     id="text33"><tspan
       sodipodi:role="line"
       id="tspan58"
       x="457.19296"
       y="291.66669">CPU trabalha eficientemente,</tspan><tspan
       sodipodi:role="line"
       id="tspan59"
       x="457.19296"
       y="302.91669">só quando necessário</tspan></text>
  <!-- Detailed Interrupt Flow -->
  <text
     x="376.14035"
     y="382.5965"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="16px"
     font-weight="bold"
     fill="#34495e"
     id="text34">Fluxo Detalhado de Interrupção</text>
  <rect
     x="49.803482"
     y="393.8035"
     width="620.39301"
     height="87.410583"
     fill="#ffffff"
     stroke="#34495e"
     stroke-width="1.60696"
     rx="4.4313788"
     id="rect34" />
  <!-- Step boxes -->
  <rect
     x="70"
     y="414"
     width="100"
     height="35"
     fill="#3498db"
     rx="3"
     id="rect35" />
  <text
     x="120"
     y="429"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text35">1. Dispositivo</text>
  <text
     x="120"
     y="439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     id="text36">termina tarefa</text>
  <rect
     x="190"
     y="414"
     width="100"
     height="35"
     fill="#e74c3c"
     rx="3"
     id="rect36" />
  <text
     x="240"
     y="429"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text37">2. Envia sinal</text>
  <text
     x="240"
     y="439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     id="text38">de interrupção</text>
  <rect
     x="310"
     y="414"
     width="100"
     height="35"
     fill="#2ecc71"
     rx="3"
     id="rect38" />
  <text
     x="360"
     y="429"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text39">3. CPU pausa</text>
  <text
     x="360"
     y="439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     id="text40">tarefa atual</text>
  <rect
     x="430"
     y="414"
     width="100"
     height="35"
     fill="#f39c12"
     rx="3"
     id="rect40" />
  <text
     x="480"
     y="429"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text41">4. Executa</text>
  <text
     x="480"
     y="439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     id="text42">rotina de E/S</text>
  <rect
     x="550"
     y="414"
     width="100"
     height="35"
     fill="#9b59b6"
     rx="3"
     id="rect42" />
  <text
     x="600"
     y="429"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="9px"
     fill="#ffffff"
     font-weight="bold"
     id="text43">5. Retoma</text>
  <text
     x="600"
     y="439"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="8px"
     fill="#ffffff"
     id="text44">tarefa original</text>
  <!-- Flow arrows -->
  <path
     d="m 170,431 h 20"
     stroke="#34495e"
     stroke-width="2"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path44" />
  <path
     d="m 290,431 h 20"
     stroke="#34495e"
     stroke-width="2"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path45" />
  <path
     d="m 410,431 h 20"
     stroke="#34495e"
     stroke-width="2"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path46" />
  <path
     d="m 530,431 h 20"
     stroke="#34495e"
     stroke-width="2"
     fill="none"
     marker-end="url(#blackArrow)"
     id="path47" />
  <!-- Example text -->
  <text
     x="120"
     y="469"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     font-style="italic"
     id="text47">Ex: Disco termina leitura</text>
  <text
     x="360"
     y="469"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     font-style="italic"
     id="text48">Salva contexto atual</text>
  <text
     x="480"
     y="469"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     font-style="italic"
     id="text49">Move dados para memória</text>
  <text
     x="600"
     y="469"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="10px"
     fill="#7f8c8d"
     font-style="italic"
     id="text50">Restaura contexto</text>
  <!-- Performance comparison -->
  <rect
     x="48.568359"
     y="489.09467"
     width="622.86328"
     height="60.056263"
     fill="#ecf0f1"
     stroke="#bdc3c7"
     stroke-width="0.943737"
     rx="4.4490232"
     id="rect50" />
  <text
     x="384.5965"
     y="505.1228"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="12px"
     fill="#2c3e50"
     font-weight="bold"
     id="text51">Vantagens das Interrupções</text>
  <text
     x="54.596489"
     y="525.1228"
     font-family="Arial, sans-serif"
     font-size="11px"
     fill="#7f8c8d"
     id="text52">• CPU livre para outras tarefas enquanto dispositivos trabalham</text>
  <text
     x="404.5965"
     y="525.1228"
     font-family="Arial, sans-serif"
     font-size="11px"
     fill="#7f8c8d"
     id="text53">• Resposta imediata quando operação E/S completa</text>
  <text
     x="54.596489"
     y="540.1228"
     font-family="Arial, sans-serif"
     font-size="11px"
     fill="#7f8c8d"
     id="text54">• Maior throughput geral do sistema</text>
  <text
     x="404.5965"
     y="540.1228"
     font-family="Arial, sans-serif"
     font-size="11px"
     fill="#7f8c8d"
     id="text55">• Menor latência percebida pelo usuário</text>
  <!-- Arrow markers -->
  <defs
     id="defs56">
    <marker
       style="overflow:visible"
       id="marker57"
       refX="0"
       refY="0"
       orient="auto-start-reverse"
       inkscape:stockid="Triangle arrow"
       markerWidth="1"
       markerHeight="1"
       viewBox="0 0 1 1"
       inkscape:isstock="true"
       inkscape:collect="always"
       preserveAspectRatio="xMidYMid">
      <path
         transform="scale(0.5)"
         style="fill:context-stroke;fill-rule:evenodd;stroke:context-stroke;stroke-width:1pt"
         d="M 5.77,0 -2.88,5 V -5 Z"
         id="path57" />
    </marker>
    <marker
       style="overflow:visible"
       id="Triangle"
       refX="0"
       refY="0"
       orient="auto-start-reverse"
       inkscape:stockid="Triangle arrow"
       markerWidth="1"
       markerHeight="1"
       viewBox="0 0 1 1"
       inkscape:isstock="true"
       inkscape:collect="always"
       preserveAspectRatio="xMidYMid">
      <path
         transform="scale(0.5)"
         style="fill:context-stroke;fill-rule:evenodd;stroke:context-stroke;stroke-width:1pt"
         d="M 5.77,0 -2.88,5 V -5 Z"
         id="path135" />
    </marker>
    <marker
       id="blackArrow"
       markerWidth="8"
       markerHeight="6"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="0 0, 8 3, 0 6"
         fill="#34495e"
         id="polygon55" />
    </marker>
    <marker
       id="orangeArrow"
       markerWidth="10"
       markerHeight="7"
       refX="9"
       refY="3.5"
       orient="auto">
      <polygon
         points="0 0, 10 3.5, 0 7"
         fill="#e67e22"
         id="polygon56" />
    </marker>
  </defs>
</svg>
