<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 800 450"
   version="1.1"
   id="svg28"
   sodipodi:docname="ffn-layer-diagram.svg"
   inkscape:version="1.4 (86a8ad7, 2024-10-11)"
   inkscape:export-filename="..\images\ffn-layer-diagram.webp"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview28"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="1.3435029"
     inkscape:cx="279.49326"
     inkscape:cy="260.14086"
     inkscape:window-width="1920"
     inkscape:window-height="1057"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg28" />
  <!-- Fundo branco -->
  <rect
     width="800"
     height="450"
     fill="white"
     id="rect1" />
  <!-- Título -->
  <text
     x="400"
     y="40"
     font-family="Arial"
     font-size="22"
     font-weight="bold"
     text-anchor="middle"
     id="text1">Camada Feed-Forward em Transformers</text>
  <!-- Diagrama principal -->
  <text
     x="400"
     y="80"
     font-family="Arial"
     font-size="18px"
     font-weight="bold"
     text-anchor="middle"
     id="text2">Feed-Forward Network (FFN)</text>
  <rect
     x="134.15523"
     y="99.944695"
     width="496.95273"
     height="232.7422"
     fill="#f9f9f9"
     stroke="#aaaaaa"
     stroke-width="1.8894"
     rx="9.2028275"
     ry="9.6975908"
     id="rect2" />
  <g
     transform="translate(40,150)"
     id="g7">
    <rect
       x="10"
       y="0"
       width="60"
       height="140"
       fill="#e6f0ff"
       stroke="#3377cc"
       stroke-width="2"
       rx="5"
       ry="5"
       id="rect3" />
    <text
       x="40"
       y="-27.894737"
       font-family="Arial"
       font-size="16px"
       text-anchor="middle"
       id="text3"><tspan
         sodipodi:role="line"
         id="tspan28"
         x="40"
         y="-27.894737">Vetores de</tspan><tspan
         sodipodi:role="line"
         id="tspan29"
         x="40"
         y="-7.8947368">Contexto</tspan></text>
    <text
       x="40"
       y="20"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text4">C₁</text>
    <text
       x="40"
       y="50"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text5">C₂</text>
    <text
       x="40"
       y="80"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text6">⋮</text>
    <text
       x="40"
       y="110"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text7">Cₙ</text>
    <!-- Seta para primeira camada linear -->
    <path
       d="m 80,70 h 40"
       stroke="#777777"
       stroke-width="2"
       fill="none"
       marker-end="url(#arrowhead)"
       id="path7" />
  </g>
  <g
     transform="translate(170,150)"
     id="g11">
    <rect
       x="0"
       y="0"
       width="100"
       height="140"
       fill="#ffe6cc"
       stroke="#cc7733"
       stroke-width="2"
       rx="5"
       ry="5"
       id="rect7" />
    <text
       x="50"
       y="-10"
       font-family="Arial"
       font-size="16px"
       text-anchor="middle"
       id="text8">Camada Linear 1</text>
    <text
       x="50"
       y="70"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text9">W₁x + b₁</text>
    <!-- Equação da transformação -->
    <text
       x="49.473686"
       y="88.157898"
       font-family="Arial"
       font-size="12px"
       text-anchor="middle"
       fill="#666666"
       id="text10"><tspan
         sodipodi:role="line"
         id="tspan30"
         x="49.473686"
         y="88.157898">Expansão</tspan><tspan
         sodipodi:role="line"
         id="tspan31"
         x="49.473686"
         y="103.1579">da dimensão</tspan></text>
    <text
       x="48.421051"
       y="119.47369"
       font-family="Arial"
       font-size="12px"
       text-anchor="middle"
       fill="#666666"
       id="text11">d<tspan
   style="font-size:65%;baseline-shift:sub"
   id="tspan32">model</tspan> → d<tspan
   style="font-size:65%;baseline-shift:sub"
   id="tspan33">ff</tspan></text>
    <!-- Seta para ReLU -->
    <path
       d="m 110,70 h 40"
       stroke="#777777"
       stroke-width="2"
       fill="none"
       marker-end="url(#arrowhead)"
       id="path11" />
  </g>
  <rect
     x="330"
     y="150"
     width="100"
     height="140"
     fill="#e6ffe6"
     stroke="#33cc33"
     stroke-width="2"
     rx="5"
     ry="5"
     id="rect11" />
  <text
     x="380"
     y="140"
     font-family="Arial"
     font-size="16px"
     text-anchor="middle"
     id="text12">Ativação</text>
  <text
     x="380"
     y="220"
     font-family="Arial"
     font-size="14px"
     text-anchor="middle"
     id="text13">ReLU/GELU</text>
  <path
     d="m 359.73684,237.36842 h 15 v -20 l 35,-40"
     stroke="#33cc33"
     stroke-width="2"
     fill="none"
     id="path13" />
  <text
     x="380"
     y="251.8421"
     font-family="Arial"
     font-size="12px"
     text-anchor="middle"
     fill="#666666"
     id="text14">max(0, x) ou</text>
  <text
     x="380"
     y="266.8421"
     font-family="Arial"
     font-size="12px"
     text-anchor="middle"
     fill="#666666"
     id="text15">x⋅Φ(x)</text>
  <path
     d="m 440,220 h 40"
     stroke="#777777"
     stroke-width="2"
     fill="none"
     marker-end="url(#arrowhead)"
     id="path15" />
  <g
     transform="translate(490,150)"
     id="g19">
    <rect
       x="0"
       y="0"
       width="100"
       height="140"
       fill="#ffe6cc"
       stroke="#cc7733"
       stroke-width="2"
       rx="5"
       ry="5"
       id="rect15" />
    <text
       x="50"
       y="-10"
       font-family="Arial"
       font-size="16px"
       text-anchor="middle"
       id="text16">Camada Linear 2</text>
    <text
       x="50"
       y="70"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text17">W₂x + b₂</text>
    <!-- Equação da transformação -->
    <text
       x="49.473682"
       y="91.84211"
       font-family="Arial"
       font-size="12px"
       text-anchor="middle"
       fill="#666666"
       id="text18"><tspan
         sodipodi:role="line"
         id="tspan34"
         x="49.473682"
         y="91.84211">Projeção</tspan><tspan
         sodipodi:role="line"
         id="tspan35"
         x="49.473682"
         y="106.84211">de volta</tspan></text>
    <text
       x="50.526318"
       y="121.57895"
       font-family="Arial"
       font-size="12px"
       text-anchor="middle"
       fill="#666666"
       id="text19">d<tspan
   style="font-size:65%;baseline-shift:sub"
   id="tspan37">ff</tspan> → d<tspan
   style="font-size:65%;baseline-shift:sub"
   id="tspan36">mode</tspan>l</text>
    <!-- Seta para saída -->
    <path
       d="m 110,70 h 40"
       stroke="#777777"
       stroke-width="2"
       fill="none"
       marker-end="url(#arrowhead)"
       id="path19" />
  </g>
  <g
     transform="translate(650,150)"
     id="g24">
    <rect
       x="0"
       y="0"
       width="60"
       height="140"
       fill="#f5e6ff"
       stroke="#9933cc"
       stroke-width="2"
       rx="5"
       ry="5"
       id="rect19" />
    <text
       x="30"
       y="-10"
       font-family="Arial"
       font-size="16px"
       text-anchor="middle"
       id="text20">Saída</text>
    <text
       x="30"
       y="20"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text21">O₁</text>
    <text
       x="30"
       y="50"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text22">O₂</text>
    <text
       x="30"
       y="80"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text23">⋮</text>
    <text
       x="30"
       y="110"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text24">Oₙ</text>
  </g>
  <g
     transform="translate(169.47368,295.78947)"
     id="g25">
    <rect
       x="0"
       y="0"
       width="420"
       height="30"
       fill="#ffffcc"
       stroke="#cccc33"
       stroke-width="1"
       rx="5"
       ry="5"
       id="rect24" />
    <text
       x="210"
       y="20"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       id="text25">Aplicada independentemente para cada posição na sequência</text>
  </g>
  <!-- Equação da FFN -->
  <g
     transform="translate(133.1579,342.63158)"
     id="g27">
    <rect
       x="0"
       y="0"
       width="500"
       height="60"
       fill="#f0f0f0"
       stroke="#aaaaaa"
       stroke-width="1"
       rx="5"
       ry="5"
       id="rect26" />
    <text
       x="250"
       y="22"
       font-family="Arial"
       font-size="16px"
       font-weight="bold"
       text-anchor="middle"
       id="text26">Equação da FFN:</text>
    <text
       x="250"
       y="45"
       font-family="'Times New Roman'"
       font-size="18px"
       text-anchor="middle"
       font-style="italic"
       id="text27">FFN(x) = ReLU(xW₁ + b₁)W₂ + b₂</text>
  </g>
  <!-- Legenda -->
  <g
     transform="translate(41.488646,409.57948)"
     id="g28">
    <rect
       width="720"
       height="25"
       fill="#f9f9f9"
       stroke="#dddddd"
       rx="5"
       ry="5"
       id="rect27"
       x="0"
       y="0" />
    <text
       x="360"
       y="17"
       font-family="Arial"
       font-size="14px"
       text-anchor="middle"
       fill="#555555"
       id="text28">A FFN nos Transformers aplica transformações lineares + não-linearidade ao vetor de contexto de cada posição.</text>
  </g>
  <!-- Marcadores de seta -->
  <defs
     id="defs28">
    <marker
       id="arrowhead"
       markerWidth="10"
       markerHeight="7"
       refX="9"
       refY="3.5"
       orient="auto">
      <polygon
         points="0 0, 10 3.5, 0 7"
         fill="#777777"
         id="polygon28" />
    </marker>
  </defs>
</svg>
